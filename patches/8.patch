Delivered-To: nsathish41@gmail.com
Received: by 10.100.186.199 with SMTP id b65csp274684pjc;
        Wed, 26 Apr 2017 05:20:50 -0700 (PDT)
X-Received: by 10.99.53.207 with SMTP id c198mr32091683pga.182.1493209250603;
        Wed, 26 Apr 2017 05:20:50 -0700 (PDT)
Return-Path: <pulseaudio-discuss-bounces@lists.freedesktop.org>
Received: from gabe.freedesktop.org (gabe.freedesktop.org. [131.252.210.177])
        by mx.google.com with ESMTPS id v6si25345976pgn.198.2017.04.26.05.20.50
        (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
        Wed, 26 Apr 2017 05:20:50 -0700 (PDT)
Received-SPF: pass (google.com: best guess record for domain of pulseaudio-discuss-bounces@lists.freedesktop.org designates 131.252.210.177 as permitted sender) client-ip=131.252.210.177;
Authentication-Results: mx.google.com;
       dkim=neutral (body hash did not verify) header.i=@gmail.com;
       spf=pass (google.com: best guess record for domain of pulseaudio-discuss-bounces@lists.freedesktop.org designates 131.252.210.177 as permitted sender) smtp.mailfrom=pulseaudio-discuss-bounces@lists.freedesktop.org;
       dmarc=fail (p=NONE sp=NONE dis=NONE) header.from=gmail.com
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9FB4D6E417;
	Wed, 26 Apr 2017 12:20:16 +0000 (UTC)
X-Original-To: pulseaudio-discuss@lists.freedesktop.org
Delivered-To: pulseaudio-discuss@lists.freedesktop.org
Received: from mail-lf0-x22c.google.com (mail-lf0-x22c.google.com
 [IPv6:2a00:1450:4010:c07::22c])
 by gabe.freedesktop.org (Postfix) with ESMTPS id A03506E40F
 for <pulseaudio-discuss@lists.freedesktop.org>;
 Wed, 26 Apr 2017 12:20:14 +0000 (UTC)
Received: by mail-lf0-x22c.google.com with SMTP id 88so106841110lfr.0
 for <pulseaudio-discuss@lists.freedesktop.org>;
 Wed, 26 Apr 2017 05:20:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20161025;
 h=from:to:subject:date:message-id:in-reply-to:references;
 bh=D5ihdRE9TBusC/4fc9UKed9JeMg1iMfiKDlDgNFtQlg=;
 b=rFoLqEoZaE9bH5VO2S6edyFF3w1Y1+VwZmvwkolc1x80puIIYhyY/tcSwUOctIBAtD
 t8ULloIfcdpzCKtS2gqsGX2RTc3h4+eoZ2nhAZcbLhDdy5ABPXe5an9jIKPPYXc5YcwH
 aXAA65EkNgOG0Ty6UnodmuaF3DtUEt0ojMGm4CssQPuGgRt9IX5I6HAH6rJ4sTYICdtz
 B4dpBDgWxNZtwYE47/ObmktaKrspq9z0srCcgi5Vsyj89Qh3tK50J6EtKlutDVROR9pS
 tdY65uzdQTc7E931xIm1EfGIPW4SHFAB/BmczdZs9fwBe7a92Rs6Bp8Pn5tr655ARPde
 jirg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:subject:date:message-id:in-reply-to
 :references;
 bh=D5ihdRE9TBusC/4fc9UKed9JeMg1iMfiKDlDgNFtQlg=;
 b=RRlO0+hz+RuunpMjQ3Jtl0hh6vtRL2N0aHOCuQwl5+A6Lpx9Nzi+sa059XW1ACjYdb
 QKDb+TVKUmogmYiTu6BhNyPglgb6TAPXOHuoKm6rLfMX5fhebfKp1Y9NMt8Gm3YaUryq
 7CSm2nZbvEk6K/9FsGifdgaXbs2N7PiYnAvMAtl64VMgLnQEYsmiWMPjzmQErVLjeM/I
 +tPe5WlVPzRMSWU1t6z7a7ih9NeLEq9fk67S3dxQcj2Vv8o9ptPIjkGpT/qxSMK9jpXS
 Vb3Iaz4DLdbCTU5/tRUmMV7VfqRrdgiCk0g/ScqWmQF0AUtNJ/lnfujHdS8ekhi7NAb6
 eRpw==
X-Gm-Message-State: AN3rC/7N64yxQ3jD8SP9z69/X/xSisej/jAqB7kmdiJcvvogEkgj84QH
 IDaQJbLEV3bori201C0=
X-Received: by 10.46.82.19 with SMTP id g19mr13656733ljb.110.1493209212518;
 Wed, 26 Apr 2017 05:20:12 -0700 (PDT)
Received: from localhost.localdomain (85-76-102-194-nat.elisa-mobile.fi.
 [85.76.102.194])
 by smtp.gmail.com with ESMTPSA id c5sm499488lfk.51.2017.04.26.05.20.11
 for <pulseaudio-discuss@lists.freedesktop.org>
 (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
 Wed, 26 Apr 2017 05:20:11 -0700 (PDT)
From: Luiz Augusto von Dentz <luiz.dentz@gmail.com>
To: pulseaudio-discuss@lists.freedesktop.org
Date: Wed, 26 Apr 2017 15:20:00 +0300
Message-Id: <20170426122000.3220-8-luiz.dentz@gmail.com>
X-Mailer: git-send-email 2.9.3
In-Reply-To: <20170426122000.3220-1-luiz.dentz@gmail.com>
References: <20170426122000.3220-1-luiz.dentz@gmail.com>
Subject: [pulseaudio-discuss] [PATCH v4 8/8] Bluetooth: Add optional
	argument to release callback
X-BeenThere: pulseaudio-discuss@lists.freedesktop.org
X-Mailman-Version: 2.1.18
Precedence: list
List-Id: General PulseAudio Discussion
 <pulseaudio-discuss.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/pulseaudio-discuss>, 
 <mailto:pulseaudio-discuss-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/pulseaudio-discuss>
List-Post: <mailto:pulseaudio-discuss@lists.freedesktop.org>
List-Help: <mailto:pulseaudio-discuss-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/pulseaudio-discuss>, 
 <mailto:pulseaudio-discuss-request@lists.freedesktop.org?subject=subscribe>
Reply-To: General PulseAudio Discussion
 <pulseaudio-discuss@lists.freedesktop.org>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: pulseaudio-discuss-bounces@lists.freedesktop.org
Sender: "pulseaudio-discuss" <pulseaudio-discuss-bounces@lists.freedesktop.org>

RnJvbTogTHVpeiBBdWd1c3RvIHZvbiBEZW50eiA8bHVpei52b24uZGVudHpAaW50ZWwuY29tPgoK
VGhpcyBhZGRzIG9wdGlvbmFsIGFyZ3VtZW50IHdoaWNoIGluZGljYXRlcyBhIHN1c3BlbmQgZnJv
bSBJTyB0aHJlYWQKc28gdGhlIGNhbGxiYWNrIGNhbiBjaG9vc2UgdG8gY2xvc2UgdGhlIGZkIG9y
IGxlYXZlIGl0IG9wZW4uCi0tLQogc3JjL21vZHVsZXMvYmx1ZXRvb3RoL2JhY2tlbmQtbmF0aXZl
LmMgICAgICAgfCAgMyArKy0KIHNyYy9tb2R1bGVzL2JsdWV0b290aC9iYWNrZW5kLW9mb25vLmMg
ICAgICAgIHwgMTIgKysrKysrKysrKy0tCiBzcmMvbW9kdWxlcy9ibHVldG9vdGgvYmx1ZXo1LXV0
aWwuYyAgICAgICAgICB8ICA5ICsrKysrKy0tLQogc3JjL21vZHVsZXMvYmx1ZXRvb3RoL2JsdWV6
NS11dGlsLmggICAgICAgICAgfCAgMiArLQogc3JjL21vZHVsZXMvYmx1ZXRvb3RoL21vZHVsZS1i
bHVlejUtZGV2aWNlLmMgfCAyNSArKysrKysrKysrKysrLS0tLS0tLS0tLS0tCiA1IGZpbGVzIGNo
YW5nZWQsIDMyIGluc2VydGlvbnMoKyksIDE5IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL3Ny
Yy9tb2R1bGVzL2JsdWV0b290aC9iYWNrZW5kLW5hdGl2ZS5jIGIvc3JjL21vZHVsZXMvYmx1ZXRv
b3RoL2JhY2tlbmQtbmF0aXZlLmMKaW5kZXggNmViNGUxNi4uNGU2Yzk4NiAxMDA2NDQKLS0tIGEv
c3JjL21vZHVsZXMvYmx1ZXRvb3RoL2JhY2tlbmQtbmF0aXZlLmMKKysrIGIvc3JjL21vZHVsZXMv
Ymx1ZXRvb3RoL2JhY2tlbmQtbmF0aXZlLmMKQEAgLTIxNyw5ICsyMTcsMTAgQEAgZmFpbDoKICAg
ICByZXR1cm4gLTE7CiB9CiAKLXN0YXRpYyB2b2lkIHNjb19yZWxlYXNlX2NiKHBhX2JsdWV0b290
aF90cmFuc3BvcnQgKnQpIHsKK3N0YXRpYyBib29sIHNjb19yZWxlYXNlX2NiKHBhX2JsdWV0b290
aF90cmFuc3BvcnQgKnQsIGJvb2wgb3B0aW9uYWwpIHsKICAgICBwYV9sb2dfaW5mbygiVHJhbnNw
b3J0ICVzIHJlbGVhc2VkIiwgdC0+cGF0aCk7CiAgICAgLyogZGV2aWNlIHdpbGwgY2xvc2UgdGhl
IFNDTyBzb2NrZXQgZm9yIHVzICovCisgICAgcmV0dXJuIHRydWU7CiB9CiAKIHN0YXRpYyB2b2lk
IHNjb19pb19jYWxsYmFjayhwYV9tYWlubG9vcF9hcGkgKmlvLCBwYV9pb19ldmVudCAqZSwgaW50
IGZkLCBwYV9pb19ldmVudF9mbGFnc190IGV2ZW50cywgdm9pZCAqdXNlcmRhdGEpIHsKZGlmZiAt
LWdpdCBhL3NyYy9tb2R1bGVzL2JsdWV0b290aC9iYWNrZW5kLW9mb25vLmMgYi9zcmMvbW9kdWxl
cy9ibHVldG9vdGgvYmFja2VuZC1vZm9uby5jCmluZGV4IGEyNDc0N2MuLjY2YTdjNDcgMTAwNjQ0
Ci0tLSBhL3NyYy9tb2R1bGVzL2JsdWV0b290aC9iYWNrZW5kLW9mb25vLmMKKysrIGIvc3JjL21v
ZHVsZXMvYmx1ZXRvb3RoL2JhY2tlbmQtb2Zvbm8uYwpAQCAtMTk2LDIwICsxOTYsMjggQEAgc3Rh
dGljIGludCBoZl9hdWRpb19hZ2VudF90cmFuc3BvcnRfYWNxdWlyZShwYV9ibHVldG9vdGhfdHJh
bnNwb3J0ICp0LCBib29sIG9wdGkKICAgICByZXR1cm4gY2FyZC0+ZmQ7CiB9CiAKLXN0YXRpYyB2
b2lkIGhmX2F1ZGlvX2FnZW50X3RyYW5zcG9ydF9yZWxlYXNlKHBhX2JsdWV0b290aF90cmFuc3Bv
cnQgKnQpIHsKK3N0YXRpYyBib29sIGhmX2F1ZGlvX2FnZW50X3RyYW5zcG9ydF9yZWxlYXNlKHBh
X2JsdWV0b290aF90cmFuc3BvcnQgKnQsIGJvb2wgb3B0aW9uYWwpIHsKICAgICBzdHJ1Y3QgaGZf
YXVkaW9fY2FyZCAqY2FyZCA9IHQtPnVzZXJkYXRhOwogCiAgICAgcGFfYXNzZXJ0KGNhcmQpOwog
CisgICAgLyogRG9uJ3QgcmVsZWFzZSB0aGUgZmQgc2luY2UgdGhpcyBpcyBqdXN0IHRvIHN1c3Bl
bmQgdGhlIHN0cmVhbSAqLworICAgIGlmIChvcHRpb25hbCkKKwkgICAgcmV0dXJuIGZhbHNlOwor
CiAgICAgaWYgKGNhcmQtPmZkIDwgMCkgewogICAgICAgICBwYV9sb2dfaW5mbygiVHJhbnNwb3J0
ICVzIGFscmVhZHkgcmVsZWFzZWQiLCB0LT5wYXRoKTsKLSAgICAgICAgcmV0dXJuOworICAgICAg
ICByZXR1cm4gdHJ1ZTsKICAgICB9CiAKICAgICAvKiBzaHV0ZG93biB0byBtYWtlIHN1cmUgY29u
bmVjdGlvbiBpcyBkcm9wcGVkIGltbWVkaWF0ZWx5ICovCiAgICAgc2h1dGRvd24oY2FyZC0+ZmQs
IFNIVVRfUkRXUik7CiAgICAgY2xvc2UoY2FyZC0+ZmQpOwogICAgIGNhcmQtPmZkID0gLTE7CisK
KyAgICBwYV9sb2dfaW5mbygiVHJhbnNwb3J0ICVzIHJlbGVhc2VkIiwgdC0+cGF0aCk7CisKKyAg
ICByZXR1cm4gdHJ1ZTsKIH0KIAogc3RhdGljIHZvaWQgaGZfYXVkaW9fYWdlbnRfY2FyZF9mb3Vu
ZChwYV9ibHVldG9vdGhfYmFja2VuZCAqYmFja2VuZCwgY29uc3QgY2hhciAqcGF0aCwgREJ1c01l
c3NhZ2VJdGVyICpwcm9wc19pKSB7CmRpZmYgLS1naXQgYS9zcmMvbW9kdWxlcy9ibHVldG9vdGgv
Ymx1ZXo1LXV0aWwuYyBiL3NyYy9tb2R1bGVzL2JsdWV0b290aC9ibHVlejUtdXRpbC5jCmluZGV4
IDg5NTZmYjEuLjI3YTE2NDcgMTAwNjQ0Ci0tLSBhL3NyYy9tb2R1bGVzL2JsdWV0b290aC9ibHVl
ejUtdXRpbC5jCisrKyBiL3NyYy9tb2R1bGVzL2JsdWV0b290aC9ibHVlejUtdXRpbC5jCkBAIC0z
OTIsNyArMzkyLDcgQEAgZmluaXNoOgogICAgIHJldHVybiByZXQ7CiB9CiAKLXN0YXRpYyB2b2lk
IGJsdWV6NV90cmFuc3BvcnRfcmVsZWFzZV9jYihwYV9ibHVldG9vdGhfdHJhbnNwb3J0ICp0KSB7
CitzdGF0aWMgYm9vbCBibHVlejVfdHJhbnNwb3J0X3JlbGVhc2VfY2IocGFfYmx1ZXRvb3RoX3Ry
YW5zcG9ydCAqdCwgYm9vbCBzdXNwZW5kKSB7CiAgICAgREJ1c01lc3NhZ2UgKm07CiAgICAgREJ1
c0Vycm9yIGVycjsKIApAQCAtNDA0LDcgKzQwNCw3IEBAIHN0YXRpYyB2b2lkIGJsdWV6NV90cmFu
c3BvcnRfcmVsZWFzZV9jYihwYV9ibHVldG9vdGhfdHJhbnNwb3J0ICp0KSB7CiAKICAgICBpZiAo
dC0+c3RhdGUgPD0gUEFfQkxVRVRPT1RIX1RSQU5TUE9SVF9TVEFURV9JRExFKSB7CiAgICAgICAg
IHBhX2xvZ19pbmZvKCJUcmFuc3BvcnQgJXMgYXV0by1yZWxlYXNlZCBieSBCbHVlWiBvciBhbHJl
YWR5IHJlbGVhc2VkIiwgdC0+cGF0aCk7Ci0gICAgICAgIHJldHVybjsKKyAgICAgICAgcmV0dXJu
IHRydWU7CiAgICAgfQogCiAgICAgcGFfYXNzZXJ0X3NlKG0gPSBkYnVzX21lc3NhZ2VfbmV3X21l
dGhvZF9jYWxsKHQtPm93bmVyLCB0LT5wYXRoLCBCTFVFWl9NRURJQV9UUkFOU1BPUlRfSU5URVJG
QUNFLCAiUmVsZWFzZSIpKTsKQEAgLTQxMyw4ICs0MTMsMTEgQEAgc3RhdGljIHZvaWQgYmx1ZXo1
X3RyYW5zcG9ydF9yZWxlYXNlX2NiKHBhX2JsdWV0b290aF90cmFuc3BvcnQgKnQpIHsKICAgICBp
ZiAoZGJ1c19lcnJvcl9pc19zZXQoJmVycikpIHsKICAgICAgICAgcGFfbG9nX2Vycm9yKCJGYWls
ZWQgdG8gcmVsZWFzZSB0cmFuc3BvcnQgJXM6ICVzIiwgdC0+cGF0aCwgZXJyLm1lc3NhZ2UpOwog
ICAgICAgICBkYnVzX2Vycm9yX2ZyZWUoJmVycik7Ci0gICAgfSBlbHNlCisgICAgICAgIHJldHVy
biBmYWxzZTsKKyAgICB9IGVsc2UgewogICAgICAgICBwYV9sb2dfaW5mbygiVHJhbnNwb3J0ICVz
IHJlbGVhc2VkIiwgdC0+cGF0aCk7CisgICAgICAgIHJldHVybiB0cnVlOworICAgIH0KIH0KIAog
Ym9vbCBwYV9ibHVldG9vdGhfZGV2aWNlX2FueV90cmFuc3BvcnRfY29ubmVjdGVkKGNvbnN0IHBh
X2JsdWV0b290aF9kZXZpY2UgKmQpIHsKZGlmZiAtLWdpdCBhL3NyYy9tb2R1bGVzL2JsdWV0b290
aC9ibHVlejUtdXRpbC5oIGIvc3JjL21vZHVsZXMvYmx1ZXRvb3RoL2JsdWV6NS11dGlsLmgKaW5k
ZXggYTNlN2JmMy4uNzkxMWUzMCAxMDA2NDQKLS0tIGEvc3JjL21vZHVsZXMvYmx1ZXRvb3RoL2Js
dWV6NS11dGlsLmgKKysrIGIvc3JjL21vZHVsZXMvYmx1ZXRvb3RoL2JsdWV6NS11dGlsLmgKQEAg
LTU5LDcgKzU5LDcgQEAgdHlwZWRlZiBlbnVtIHBhX2JsdWV0b290aF90cmFuc3BvcnRfc3RhdGUg
ewogfSBwYV9ibHVldG9vdGhfdHJhbnNwb3J0X3N0YXRlX3Q7CiAKIHR5cGVkZWYgaW50ICgqcGFf
Ymx1ZXRvb3RoX3RyYW5zcG9ydF9hY3F1aXJlX2NiKShwYV9ibHVldG9vdGhfdHJhbnNwb3J0ICp0
LCBib29sIG9wdGlvbmFsLCBzaXplX3QgKmltdHUsIHNpemVfdCAqb210dSk7Ci10eXBlZGVmIHZv
aWQgKCpwYV9ibHVldG9vdGhfdHJhbnNwb3J0X3JlbGVhc2VfY2IpKHBhX2JsdWV0b290aF90cmFu
c3BvcnQgKnQpOwordHlwZWRlZiBib29sICgqcGFfYmx1ZXRvb3RoX3RyYW5zcG9ydF9yZWxlYXNl
X2NiKShwYV9ibHVldG9vdGhfdHJhbnNwb3J0ICp0LCBib29sIG9wdGlvbmFsKTsKIHR5cGVkZWYg
dm9pZCAoKnBhX2JsdWV0b290aF90cmFuc3BvcnRfZGVzdHJveV9jYikocGFfYmx1ZXRvb3RoX3Ry
YW5zcG9ydCAqdCk7CiB0eXBlZGVmIHZvaWQgKCpwYV9ibHVldG9vdGhfdHJhbnNwb3J0X3NldF9z
cGVha2VyX2dhaW5fY2IpKHBhX2JsdWV0b290aF90cmFuc3BvcnQgKnQsIHVpbnQxNl90IGdhaW4p
OwogdHlwZWRlZiB2b2lkICgqcGFfYmx1ZXRvb3RoX3RyYW5zcG9ydF9zZXRfbWljcm9waG9uZV9n
YWluX2NiKShwYV9ibHVldG9vdGhfdHJhbnNwb3J0ICp0LCB1aW50MTZfdCBnYWluKTsKZGlmZiAt
LWdpdCBhL3NyYy9tb2R1bGVzL2JsdWV0b290aC9tb2R1bGUtYmx1ZXo1LWRldmljZS5jIGIvc3Jj
L21vZHVsZXMvYmx1ZXRvb3RoL21vZHVsZS1ibHVlejUtZGV2aWNlLmMKaW5kZXggMmYwZWM5Ny4u
MGM5NzcxZiAxMDA2NDQKLS0tIGEvc3JjL21vZHVsZXMvYmx1ZXRvb3RoL21vZHVsZS1ibHVlejUt
ZGV2aWNlLmMKKysrIGIvc3JjL21vZHVsZXMvYmx1ZXRvb3RoL21vZHVsZS1ibHVlejUtZGV2aWNl
LmMKQEAgLTc1MSwyMCArNzUxLDIxIEBAIHN0YXRpYyBpbnQgdHJhbnNwb3J0X2FjcXVpcmUoc3Ry
dWN0IHVzZXJkYXRhICp1LCBib29sIG9wdGlvbmFsKSB7CiAgICAgcmV0dXJuIDA7CiB9CiAKLXN0
YXRpYyB2b2lkIHRyYW5zcG9ydF9yZWxlYXNlKHN0cnVjdCB1c2VyZGF0YSAqdSkgeworc3RhdGlj
IHZvaWQgdHJhbnNwb3J0X3JlbGVhc2Uoc3RydWN0IHVzZXJkYXRhICp1LCBib29sIG9wdGlvbmFs
KSB7CisgICAgYm9vbCByZXQ7CisKICAgICBwYV9hc3NlcnQodS0+dHJhbnNwb3J0KTsKIAogICAg
IC8qIElnbm9yZSBpZiBhbHJlYWR5IHJlbGVhc2VkICovCiAgICAgaWYgKCF1LT50cmFuc3BvcnRf
YWNxdWlyZWQpCiAgICAgICAgIHJldHVybjsKIAotICAgIHBhX2xvZ19kZWJ1ZygiUmVsZWFzaW5n
IHRyYW5zcG9ydCAlcyIsIHUtPnRyYW5zcG9ydC0+cGF0aCk7Ci0KLSAgICB1LT50cmFuc3BvcnQt
PnJlbGVhc2UodS0+dHJhbnNwb3J0KTsKLQotICAgIHUtPnRyYW5zcG9ydF9hY3F1aXJlZCA9IGZh
bHNlOwotCi0gICAgdGVhcmRvd25fc3RyZWFtKHUpOworICAgIHJldCA9IHUtPnRyYW5zcG9ydC0+
cmVsZWFzZSh1LT50cmFuc3BvcnQsIG9wdGlvbmFsKTsKKyAgICBpZiAocmV0IHx8ICFvcHRpb25h
bCkgeworICAgICAgICBwYV9sb2dfZGVidWcoIlJlbGVhc2luZyB0cmFuc3BvcnQgJXMiLCB1LT50
cmFuc3BvcnQtPnBhdGgpOworICAgICAgICB1LT50cmFuc3BvcnRfYWNxdWlyZWQgPSBmYWxzZTsK
KyAgICAgICAgdGVhcmRvd25fc3RyZWFtKHUpOworICAgIH0KIH0KIAogLyogUnVuIGZyb20gSS9P
IHRocmVhZCAqLwpAQCAtODUyLDcgKzg1Myw3IEBAIHN0YXRpYyBpbnQgc291cmNlX3Byb2Nlc3Nf
bXNnKHBhX21zZ29iamVjdCAqbywgaW50IGNvZGUsIHZvaWQgKmRhdGEsIGludDY0X3Qgb2ZmCiAK
ICAgICAgICAgICAgICAgICAgICAgLyogU3RvcCB0aGUgZGV2aWNlIGlmIHRoZSBzaW5rIGlzIHN1
c3BlbmRlZCBhcyB3ZWxsICovCiAgICAgICAgICAgICAgICAgICAgIGlmICghdS0+c2luayB8fCB1
LT5zaW5rLT5zdGF0ZSA9PSBQQV9TSU5LX1NVU1BFTkRFRCkKLSAgICAgICAgICAgICAgICAgICAg
ICAgIHRyYW5zcG9ydF9yZWxlYXNlKHUpOworICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNw
b3J0X3JlbGVhc2UodSwgdHJ1ZSk7CiAKICAgICAgICAgICAgICAgICAgICAgaWYgKHUtPnJlYWRf
c21vb3RoZXIpCiAgICAgICAgICAgICAgICAgICAgICAgICBwYV9zbW9vdGhlcl9wYXVzZSh1LT5y
ZWFkX3Ntb290aGVyLCBwYV9ydGNsb2NrX25vdygpKTsKQEAgLTEwMTksNyArMTAyMCw3IEBAIHN0
YXRpYyBpbnQgc2lua19wcm9jZXNzX21zZyhwYV9tc2dvYmplY3QgKm8sIGludCBjb2RlLCB2b2lk
ICpkYXRhLCBpbnQ2NF90IG9mZnNlCiAgICAgICAgICAgICAgICAgICAgICAgICAvKiBXZSBkZWxp
YmVyYXRlbHkgaWdub3JlIHdoZXRoZXIgc3RvcHBpbmcKICAgICAgICAgICAgICAgICAgICAgICAg
ICAqIGFjdHVhbGx5IHdvcmtlZC4gU2luY2UgdGhlIHN0cmVhbV9mZCBpcwogICAgICAgICAgICAg
ICAgICAgICAgICAgICogY2xvc2VkIGl0IGRvZXNuJ3QgcmVhbGx5IG1hdHRlciAqLwotICAgICAg
ICAgICAgICAgICAgICAgICAgdHJhbnNwb3J0X3JlbGVhc2UodSk7CisgICAgICAgICAgICAgICAg
ICAgICAgICB0cmFuc3BvcnRfcmVsZWFzZSh1LCB0cnVlKTsKIAogICAgICAgICAgICAgICAgICAg
ICBicmVhazsKIApAQCAtMTUxNiw3ICsxNTE3LDcgQEAgc3RhdGljIHZvaWQgdGhyZWFkX2Z1bmMo
dm9pZCAqdXNlcmRhdGEpIHsKICAgICAgICAgfQogICAgICAgICBpZiAocmV0ID09IDApIHsKICAg
ICAgICAgICAgIHBhX2xvZ19kZWJ1ZygiSU8gdGhyZWFkIHNodXRkb3duIHJlcXVlc3RlZCwgc3Rv
cHBpbmcgY2xlYW5seSIpOwotICAgICAgICAgICAgdHJhbnNwb3J0X3JlbGVhc2UodSk7CisgICAg
ICAgICAgICB0cmFuc3BvcnRfcmVsZWFzZSh1LCBmYWxzZSk7CiAgICAgICAgICAgICBnb3RvIGZp
bmlzaDsKICAgICAgICAgfQogICAgIH0KQEAgLTE1OTksNyArMTYwMCw3IEBAIHN0YXRpYyB2b2lk
IHN0b3BfdGhyZWFkKHN0cnVjdCB1c2VyZGF0YSAqdSkgewogICAgIH0KIAogICAgIGlmICh1LT50
cmFuc3BvcnQpIHsKLSAgICAgICAgdHJhbnNwb3J0X3JlbGVhc2UodSk7CisgICAgICAgIHRyYW5z
cG9ydF9yZWxlYXNlKHUsIGZhbHNlKTsKICAgICAgICAgdS0+dHJhbnNwb3J0ID0gTlVMTDsKICAg
ICB9CiAKLS0gCjIuOS4zCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fXwpwdWxzZWF1ZGlvLWRpc2N1c3MgbWFpbGluZyBsaXN0CnB1bHNlYXVkaW8tZGlzY3Vz
c0BsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFp
bG1hbi9saXN0aW5mby9wdWxzZWF1ZGlvLWRpc2N1c3MK
